<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title></title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">Black Jack</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Embedded <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cortex-M0</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../a/">中断</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../waiting/">Cortex-M3/4</a>
</li>

                        
                            
<li >
    <a href="../waiting/">STM32L0系列</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../waiting/">Software</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">About</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../waiting/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/BlackJackZXP"><i class="fa fa-github"></i> GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#1">1.下载</a></li>
            <li class="second-level"><a href="#2ide">2.配置IDE开发环境</a></li>
                
            <li class="second-level"><a href="#3sdk">3.配置SDK</a></li>
                
                <li class="third-level"><a href="#1-sdk">1.配置 SDK 开发环境</a></li>
                <li class="third-level"><a href="#2">2.创建工程模板</a></li>
            <li class="second-level"><a href="#3ide">3.使用IDE编译工程</a></li>
                
            <li class="second-level"><a href="#_1">参考文献</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<p>ESP8266EX 由乐鑫公司开发，提供了⼀套高度集成的 Wi-Fi SoC 解决⽅案。乐鑫也提供了一整的 SDK 开发环境，但是基于 Linux ，而程序下载和调试却是在 windows 下，这导致开发不太方便。好在安信可提供了一体化开发环境。本文是在安信可基础上搭建的开发环境：</p>
<ul>
<li>下载并安装开发环境</li>
<li>修改并导入 SDK 文件</li>
</ul>
<h1 id="1">1.下载</h1>
<p>需要下载，两份东西，安信可开发环境包和乐鑫SDK包：</p>
<ul>
<li>安信可开发环境包，可以其<a href="http://wiki.ai-thinker.com/doku.php">官网网站</a>查阅，这里给出<a href="http://pan.baidu.com/s/1skRvR1j">下载地址</a></li>
<li>乐鑫SDK包，分为<code>NONOS</code>和<code>FreeRTOS</code>两种，我们这里以<code>FreeRTOS</code>为例，可以在<a href="http://espressif.com/">官方网站</a>查阅，这里给出<a href="http://espressif.com/zh-hans/support/download/sdks-demos?keys=&amp;field_type_tid%5B%5D=14">下载地址</a></li>
</ul>
<p>解压安信可开发环境包，文件如下：
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-5eac721557705a2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" /></p>
<ul>
<li>Cygwin.exe : cygwin和xtensa编译器环境，含ESP8266和ESP31B/ESP32开发环境</li>
<li>Eclipse : eclipse c/c++ 开发工具</li>
<li>ESP_IDE.exe : 一体化开发环境配置工具</li>
</ul>
<p>解压<code>cygwin</code>到<code>D:\\</code>目录下：</p>
<p><img alt="" src="http://upload-images.jianshu.io/upload_images/453252-23cb5674dc6916c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" /></p>
<p>解压<code>eclipse</code>到<code>D:\Program Files</code>下：</p>
<p><img alt="" src="http://upload-images.jianshu.io/upload_images/453252-5120d2f51b55d1e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
新建一个<code>AiThinker</code>文件夹(我的是<code>2-AiThinker</code>文件夹，<code>2-</code>是为了文件排序方便使用，结构清晰)，有来存放<code>ESP_IDE.exe</code>和<code>SDK</code>。</p>
<p><em>注：这几个位置都可以自定义，但请注意：Cygwin 路径不要有中文或者空格，建议直接放在盘符的根目录下</em></p>
<h3 id="2ide">2.配置IDE开发环境</h3>
<p>双击打开<code>ESP_IDE.exe</code>，选择之前放置的<code>Eclipse</code>位置和<code>Cygwin</code>位置，若使用<code>ESP32</code>则需要选择<code>IDF_PATH</code>所在的目录（不开发<code>ESP32</code>时可以留空）
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-4726b3e182500b81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
路径错误时，均会有提示错误，如果确认配置正确，可以勾选<code>Not Ask</code>，下次应用将会自动根据指定的位置初始化环境并启动<code>Eclipse</code>，<code>ESP_IDE.exe</code>同目录下<code>config</code>文件夹内含有配置文件<code>cfg.xml</code>，可以使用记事本编辑
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-730ca204a61f44e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
<em>注: 当配置格式读取出错时，应用会删除配置，并在下次启动时新建配置</em></p>
<p>若配置无误，则点击<code>OK</code>后，会启动<code>Eclipse</code>，首次使用<code>Eclipse</code>时会提示选择一个目录作为工作空间，之后即可使用<code>Eclipse</code>进行<code>SDK</code>的开发
![](http://ob9ipaxfd.bkt.clouddn.com/esp8266/ru-he-da-jian-esp8266-yi-ti-hua-kai-fa-huan-jing/7.png
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-7c46f85bd4658742.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" /></p>
<h3 id="3sdk">3.配置SDK</h3>
<h6 id="1-sdk">1.配置 SDK 开发环境</h6>
<p>我们以<code>FreeRTOS</code>为例，解压下载的<code>ESP8266_RTOS_SDK_V1.5.0</code>到<code>2-AiThinker</code>目录下，同时在<code>2-AiThinker</code>文件夹下创建一个<code>template</code>作为工程模板：
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-9c93f70c49b954a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" /></p>
<ul>
<li><code>ESP_IDE.exe</code> : <code>ESP</code> 启动一件配置</li>
<li><code>config</code> : <code>ESP_IDE.exe</code> 的配置文件</li>
<li><code>ESP8266_RTOS_SDK_V1.5.0</code> : <code>SDK</code> </li>
<li><code>template</code> : 工程模板</li>
<li><code>workspace</code> : <code>eclipse</code> 工作空间</li>
</ul>
<p>创建<code>template</code>文件的好处是将SDK和工程分离，将来创建新工程只需要复制<code>template</code>文件就好了，不要复制整个<code>SDK</code>，再通过<code>ESP_IDE.exe</code>重新配置<code>workspace</code>。</p>
<h6 id="2">2.创建工程模板</h6>
<p>现在<code>template</code>还是空文件夹，为了完善工程，我们需要用到的三个文件夹，分别是<code>ESP8266_RTOS_SDK_V1.5.0\examples</code>文件夹下的<code>project_template</code>和<code>ESP8266_RTOS_SDK_V1.5.0</code>文件夹下的<code>include</code> <code>driver_lib</code>。</p>
<ol>
<li>将这三个文件复制到<code>template</code>下</li>
<li>将<code>driver_lib</code>改为<code>app</code></li>
<li>拷贝<code>project_template</code>文件夹下内容到<code>app</code>并覆盖，在删除<code>project_template</code></li>
<li>修改<code>app</code>下得<code>makefile</code>，将<code>sample_lib</code>改为<code>driver</code>，<code>sample_lib/libsample.a</code>改为<code>driver/libdriver.a</code>，删除<code>sample_lib</code>文件夹</li>
<li>修改<code>app</code>下得<code>makefile</code>，添加如下代码</li>
</ol>
<pre><code>parent_dir:=$(abspath $(shell pwd)/$(lastword $(MAKEFILE_LIST)))
parent_dir:=$(shell dirname $(parent_dir))
parent_dir:=$(shell dirname $(parent_dir))
parent_dir:=$(shell dirname $(parent_dir))

SDK_PATH= $(parent_dir)/ESP8266_RTOS_SDK_ V1.5.0  #指定SDK路径
BIN_PATH= $(SDK_PATH)/bin                         #指定编译生成bin路径
</code></pre>

<p><img alt="" src="http://upload-images.jianshu.io/upload_images/453252-51ab4e62e8139915.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" /></p>
<p>到此模板文件基本创建完成</p>
<h3 id="3ide">3.使用IDE编译工程</h3>
<p>1.选择 File→Import
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-9c86a616716533fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
2.点开<code>C/C++</code>分支，并选中<code>Existing Code as Makefile Project</code>
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-f559d0cb3ec39365.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
3.去除<code>C++</code>支持，选中<code>Cygwin GCC</code>点击<code>Browser</code>，选中<code>template</code>，点击<code>finish</code>
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-0923679a22b845aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
4.然后右击<code>template</code>工程文件，选择<code>Build Project</code>，会发现一个错误：
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-eedcc39e5ebe6238.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
这是因为没找到其实编译的<code>Makefile</code>文件，这个文件位于<code>ESP8266_RTOS_SDK_ V1.5.0</code>目录下，我们打开看一下：
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-94fae025bd9c1130.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
这几个参数决定编译的模式，具体内容我们以后再详细介绍，也可查看官方文档。</p>
<p>5.将上述<code>Makefile</code>文件复制到<code>template</code>目录下，重新<code>Build Project</code>，生成<code>bin</code>文件:
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-e21acc86a978c03d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" />
生成的<code>bin</code>文件是在<code>ESP8266_RTOS_SDK_ V1.5.0\bin</code>下，当然也可以修改<code>Makefile</code>文件，比如在<code>template</code>文件下创建<code>bin</code>，将<code>Makefile</code>的路径修改如下即可:
<img alt="" src="http://upload-images.jianshu.io/upload_images/453252-d3426c47151fb933.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" /></p>
<p>!!! note ""
    If the <code>repo_url</code> is set to a GitHub or BitBucket repository, and the
    <code>repo_name</code> is set to <em>GitHub</em> or <em>BitBucket</em> (implied by default), an
    edit button will appear at the top of every article. This is the automatic
    behavior that MkDocs implements. See the <a href="http://www.mkdocs.org/user-guide/configuration/#edit_uri">MkDocs documentation</a> on more
    guidance regarding the <code>edit_uri</code> attribute, which defines whether the edit
    button is shown or not.</p>
<h3 id="_1">参考文献</h3>
<ol>
<li><a href="http://wiki.ai-thinker.com/doku.php/utils/ai_esp_ide_build">如何搭建安信可 ESP 系列一体化开发环境</a></li>
<li><a href="http://wiki.ai-thinker.com/doku.php/utils/ai_esp_ide_use">如何使用安信可 ESP 系列一体化开发环境</a></li>
</ol></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>
    <script src="../search/require.js"></script>
    <script src="../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
